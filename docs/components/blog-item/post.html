<section class="post"><div class="container"><h1 class="post__title heading-h1"> How we&#160;perform long-running tasks using AWS services</h1><div class="post__author"><div class="post__author-left"><picture style="flex-shrink: 0"><source srcset="./img/author.avif" type="image/avif"/><source srcset="./img/author.webp" type="image/webp"/> <img class="post__author-img" src="./img/author.png" alt="author"/></picture><div class="post__author-wrapper"><p class="post__author-name text-p-medium">Renee Wells</p><p class="post__author-profession text-p-default"> Product Designer, Quotient</p></div></div> <span class="post__author-date text-p-default">10 min read November 10, 2023</span></div><picture><source srcset="./img/posts/post_article-4.avif" type="image/avif"/><source srcset="./img/posts/post_article-4.webp" type="image/webp"/> <img class="post__img" src="./img/posts/post_article-4.jpg" alt="example"/></picture><div class="post__descr"><p class="post__descr-text text-p-medium"> Depending on&#160;the input, this can result in&#160;using a&#160;lot of&#160;processing power and time. The whole process would take approximately 5 seconds to return a&#160;result to&#160;the client. Keep in&#160;mind we&#8217;re talking about 1 item, a&#160;contact from a&#160;contact book. After a&#160;while, a&#160;new requirement is added. Solution must support companies that manage their contacts organized in&#160;files. We&#160;agreed to&#160;develop a&#160;web application that would support upload of&#160;dataset files, like .csv. The new web application should support third party integrations. Some of&#160;them are the ESP/CRM services, like Mailchimp. User does not need to&#160;see the result immediately. System can later notify the user about the result, when the process finishes. This information is&#160;the key that we&#160;need to&#160;leverage on&#160;when developing our solution. So&#160;here&#8217;s how we&#160;did it.</p><h3 class="post__descr-title heading-h3">Initial approach</h3><p class="post__descr-text text-p-medium"> Our initial approach went like this: The web application would read a .csv file line-by-line and submit an&#160;array of&#160;entries to&#160;the backend REST API. Processing is&#160;in&#160;real time, immediately after the user makes a request for the process to&#160;start, he&#160;expects a&#160;result. Another approach is&#160;to&#160;apply vertical scaling to&#160;AWS architecture. Meaning we&#160;used larger, more expensive instances that have more RAM and processing power. This system worked well for smaller datasets, maybe up&#160;to&#160;5k entries, but for larger datasets multiple problems arose. This solution is&#160;prone to&#160;failure due to&#160;long request time. Also, because of&#160;some 3rd party services that aren&#8217;t optimized for large scale loads or&#160;they don&#8217;t have batch endpoints. 3rd party services also tend to&#160;protect their architecture from making a&#160;huge bill on&#160;their&#160;end. The whole process was done in&#160;real-time. The request can take a&#160;lot of&#160;time hanging in&#160;there while the backend would do&#160;all the work and return the result to&#160;the client. The request was limited to&#160;300 seconds (at&#160;time of&#160;writing the article) before AWS would cancel&#160;it&#8230; Also I&#160;need to&#160;mention that the user has to&#160;wait a&#160;few minutes to&#160;see the results. They can&#8217;t use the app during the process, which makes for a&#160;bad user experience.</p></div><article class="author__article"><picture style="flex-shrink: 0"><source srcset="./img/author-2.avif" type="image/avif"/><source srcset="./img/author-2.webp" type="image/webp"/> <img class="author__article-img" src="./img/author-2.jpg" alt="author"/></picture><div class="author__article-descr"><ul class="author__social-list"><li class="author__social-item"> <a class="author__social-link" href="#"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M0 16C0 7.16344 7.16344 0 16 0 24.8366 0 32 7.16344 32 16 32 24.8366 24.8366 32 16 32 7.16344 32 0 24.8366 0 16Z" fill="#1D1E25"/><path d="M22.2281 20.625 22.9375 16H18.5V13C18.5 11.7344 19.1188 10.5 21.1063 10.5H23.125V6.5625C23.125 6.5625 21.2938 6.25 19.5438 6.25 15.8875 6.25 13.5 8.46563 13.5 12.475V16H9.4375V20.625H13.5V31.8062C14.3156 31.9344 15.15 32 16 32 16.85 32 17.6844 31.9344 18.5 31.8062V20.625H22.2281Z" fill="#1D1E25"/></svg></a></li><li class="author__social-item"> <a class="author__social-link" href="#"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M0 16C0 7.16344 7.16344 0 16 0 24.8366 0 32 7.16344 32 16 32 24.8366 24.8366 32 16 32 7.16344 32 0 24.8366 0 16Z" fill="#1D1E25"/><path fill-rule="evenodd" clip-rule="evenodd" d="M15.5208 13.005 15.5544 13.5586 14.9948 13.4908C12.9579 13.2309 11.1784 12.3497 9.66756 10.8695L8.92891 10.1351 8.73865 10.6774C8.33575 11.8864 8.59316 13.1632 9.43253 14.0219 9.8802 14.4964 9.77948 14.5642 9.00725 14.2817 8.73865 14.1913 8.50363 14.1235 8.48124 14.1574 8.4029 14.2365 8.6715 15.2647 8.88414 15.6715 9.17513 16.2364 9.76828 16.79 10.4174 17.1177L10.9658 17.3776 10.3167 17.3889C9.68994 17.3889 9.66756 17.4002 9.73471 17.6374 9.95854 18.3719 10.8427 19.1515 11.8276 19.4904L12.5214 19.7277 11.9171 20.0893C11.0218 20.609 9.96973 20.9028 8.91772 20.9254 8.41409 20.9367 8 20.9819 8 21.0158 8 21.1287 9.36538 21.7615 10.16 22.01 12.5438 22.7445 15.3753 22.4281 17.5017 21.1739 19.0126 20.2813 20.5235 18.5074 21.2286 16.79 21.6091 15.8748 21.9896 14.2026 21.9896 13.4004 21.9896 12.8807 22.0232 12.8129 22.6499 12.1915 23.0192 11.8299 23.3662 11.4345 23.4333 11.3215 23.5452 11.1068 23.534 11.1068 22.9633 11.2989 22.012 11.6378 21.8777 11.5926 22.3477 11.0842 22.6947 10.7226 23.1088 10.0673 23.1088 9.87524 23.1088 9.84134 22.9409 9.89783 22.7506 9.99952 22.5492 10.1125 22.1015 10.282 21.7658 10.3837L21.1614 10.5758 20.613 10.2029C20.3108 9.99952 19.8856 9.77355 19.6617 9.70576 19.0909 9.54758 18.218 9.57017 17.7032 9.75095 16.3042 10.2594 15.4201 11.57 15.5208 13.005Z" fill="#1D1E25"/></svg></a></li><li class="author__social-item"> <a class="author__social-link" href="#"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M0 16C0 7.16344 7.16344 0 16 0 24.8366 0 32 7.16344 32 16 32 24.8366 24.8366 32 16 32 7.16344 32 0 24.8366 0 16Z" fill="#1D1E25"/><path d="M11.546 9.8818C11.5224 8.8136 10.7586 8 9.51815 8 8.27774 8 7.4668 8.8136 7.4668 9.8818 7.4668 10.9279 8.25377 11.7649 9.47108 11.7649H9.49426C10.7586 11.7649 11.546 10.9279 11.546 9.8818Z" fill="#1D1E25"/><path d="M11.3072 13.252H7.68121V24.1464H11.3072V13.252Z" fill="#1D1E25"/><path d="M20.2089 12.9961C22.5949 12.9961 24.3837 14.5535 24.3837 17.8998L24.3836 24.1464H20.7578V18.3178C20.7578 16.8538 20.2331 15.8548 18.9205 15.8548 17.9187 15.8548 17.3221 16.5283 17.06 17.1788 16.9641 17.4119 16.9406 17.7367 16.9406 18.0623V24.1467H13.3142C13.3142 24.1467 13.362 14.2745 13.3142 13.2522H16.9406V14.7953C17.4218 14.0535 18.2838 12.9961 20.2089 12.9961Z" fill="#1D1E25"/></svg></a></li><li class="author__social-item"> <a class="author__social-link" href="#"><svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M0 16C0 7.16344 7.16344 0 16 0 24.8366 0 32 7.16344 32 16 32 24.8366 24.8366 32 16 32 7.16344 32 0 24.8366 0 16Z" fill="#1D1E25"/><path fill-rule="evenodd" clip-rule="evenodd" d="M16.0007 7.46667C13.6832 7.46667 13.3923 7.47681 12.4821 7.51823 11.5736 7.55983 10.9535 7.70366 10.4109 7.91468 9.84969 8.13264 9.37359 8.4242 8.89928 8.89869 8.42461 9.37301 8.13305 9.8491 7.91438 10.4102 7.70282 10.9529 7.55882 11.5732 7.51793 12.4813 7.47722 13.3915 7.46655 13.6826 7.46655 16.0001 7.46655 18.3176 7.47686 18.6076 7.51811 19.5178 7.55989 20.4263 7.70371 21.0464 7.91456 21.589 8.13269 22.1502 8.42425 22.6263 8.89875 23.1006 9.37288 23.5753 9.84898 23.8676 10.4099 24.0855 10.9528 24.2965 11.5731 24.4404 12.4814 24.482 13.3916 24.5234 13.6823 24.5335 15.9996 24.5335 18.3173 24.5335 18.6073 24.5234 19.5175 24.482 20.426 24.4404 21.0468 24.2965 21.5897 24.0855 22.1508 23.8676 22.6262 23.5753 23.1003 23.1006 23.575 22.6263 23.8665 22.1502 24.0852 21.5891 24.295 21.0464 24.439 20.4261 24.4817 19.518 24.5226 18.6078 24.5332 18.3176 24.5332 16.0001 24.5332 13.6826 24.5226 13.3917 24.4817 12.4815 24.439 11.573 24.295 10.9529 24.0852 10.4103 23.8665 9.8491 23.575 9.37301 23.1003 8.89869 22.6256 8.42402 22.151 8.13246 21.5892 7.91468 21.0452 7.70366 20.4247 7.55983 19.5163 7.51823 18.606 7.47681 18.3163 7.46667 15.998 7.46667H16.0007ZM15.2351 9.00444C15.4623 9.00409 15.7158 9.00444 16.0006 9.00444 18.2791 9.00444 18.5491 9.01262 19.4489 9.05351 20.2809 9.09156 20.7324 9.23058 21.0332 9.34738 21.4315 9.50205 21.7154 9.68694 22.0139 9.98561 22.3125 10.2843 22.4974 10.5687 22.6525 10.967 22.7693 11.2674 22.9085 11.719 22.9463 12.551 22.9872 13.4505 22.9961 13.7208 22.9961 15.9981 22.9961 18.2755 22.9872 18.5457 22.9463 19.4453 22.9083 20.2773 22.7693 20.7288 22.6525 21.0293 22.4978 21.4275 22.3125 21.7111 22.0139 22.0096 21.7152 22.3082 21.4316 22.4931 21.0332 22.6478 20.7328 22.7651 20.2809 22.9038 19.4489 22.9418 18.5493 22.9827 18.2791 22.9916 16.0006 22.9916 13.722 22.9916 13.452 22.9827 12.5524 22.9418 11.7204 22.9034 11.2689 22.7644 10.9679 22.6476 10.5697 22.4929 10.2852 22.3081 9.98654 22.0094 9.68787 21.7107 9.50298 21.427 9.34796 21.0286 9.23116 20.7281 9.09196 20.2766 9.05409 19.4446 9.0132 18.545 9.00502 18.2748 9.00502 15.996 9.00502 13.7172 9.0132 13.4484 9.05409 12.5488 9.09213 11.7168 9.23116 11.2653 9.34796 10.9645 9.50263 10.5662 9.68787 10.2818 9.98654 9.98312 10.2852 9.68445 10.5697 9.49956 10.9679 9.34454 11.2687 9.2272 11.7204 9.08853 12.5524 9.05031 13.3396 9.01476 13.6447 9.00409 15.2351 9.00231V9.00444ZM20.5557 10.4214C19.9904 10.4214 19.5317 10.8795 19.5317 11.445 19.5317 12.0103 19.9904 12.469 20.5557 12.469 21.1211 12.469 21.5797 12.0103 21.5797 11.445 21.5797 10.8797 21.1211 10.4214 20.5557 10.4214ZM16.0007 11.6178C13.5806 11.6178 11.6184 13.58 11.6184 16.0001 11.6184 18.4202 13.5806 20.3815 16.0007 20.3815 18.4208 20.3815 20.3823 18.4202 20.3823 16.0001 20.3823 13.58 18.4208 11.6178 16.0007 11.6178ZM16.0007 13.1556C17.5715 13.1556 18.8451 14.429 18.8451 16.0001 18.8451 17.5709 17.5715 18.8445 16.0007 18.8445 14.4296 18.8445 13.1562 17.5709 13.1562 16.0001 13.1562 14.429 14.4296 13.1556 16.0007 13.1556Z" fill="#1D1E25"/></svg></a></li><li class="author__social-item">Share this article</li></ul> <span class="author__article-writen text-p-default">Written by</span><h5 class="author__article-name heading-h5">Renee Wells</h5> <span class="author__article-profession text-p-default">Product Designer, Quotient</span><p class="author__article-text"> Skilled in&#160;React Native, iOS and backend, Toni has a&#160;demonstrated knowledge of&#160;the information technology and services industry, with plenty of&#160;hands-on experience to&#160;back it&#160;up.</p></div></article></div></section>